if [[ -n "$SSH_CLIENT" || -n "$SSH_TTY" ]]; then
  : # keep last login for SSH
else
  touch ~/.hushlogin
fi

export ZSH="$HOME/.oh-my-zsh"

ZSH_THEME="agnoster"

zstyle ':omz:update' frequency 13

DISABLE_AUTO_TITLE="true"

ENABLE_CORRECTION="true"

COMPLETION_WAITING_DOTS="true"

plugins=(
  git
)

source $ZSH/oh-my-zsh.sh
source <(fzf --zsh)

source /opt/homebrew/share/zsh-autosuggestions/zsh-autosuggestions.zsh
source /opt/homebrew/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh

prompt_context(){}

function y() {
	local tmp="$(mktemp -t "yazi-cwd.XXXXXX")" cwd
	yazi "$@" --cwd-file="$tmp"
	IFS= read -r -d '' cwd < "$tmp"
	[ -n "$cwd" ] && [ "$cwd" != "$PWD" ] && builtin cd -- "$cwd"
	rm -f -- "$tmp"
}

function clg() {
  local chezmoi_dir
  chezmoi_dir=$(chezmoi source-path)

  if [ -z "$chezmoi_dir" ] || [ ! -d "$chezmoi_dir" ]; then
    echo "Error: Could not find chezmoi source directory." >&2
    return 1
  fi

  (
    cd "$chezmoi_dir" && lazygit
  )
}

export PYENV_ROOT="$HOME/.pyenv"
[[ -d $PYENV_ROOT/bin ]] && export PATH="$PYENV_ROOT/bin:$PATH"
eval "$(pyenv init - zsh)"

alias zshconfig="nvim ~/.zshrc"
alias ohmyzsh="nvim ~/.oh-my-zsh"
alias lg="lazygit"
alias ld="lazydocker"
alias yazi="y"

eval "$(atuin init zsh)"
export PATH="$PATH:/Users/k-metzsch/.composer/vendor/bin"
# The following lines have been added by Docker Desktop to enable Docker CLI completions.
fpath=(/Users/k-metzsch/.docker/completions $fpath)
autoload -Uz compinit
compinit
# End of Docker CLI completions
